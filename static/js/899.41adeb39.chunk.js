"use strict";(self.webpackChunkmy_react_app=self.webpackChunkmy_react_app||[]).push([[899],{2899:(e,t,r)=>{r.r(t),r.d(t,{default:()=>A});var n=r(2791);const i={GameArea:"PrizePot_GameArea__+JVoK",prizeFund:"PrizePot_prizeFund__y+M23",coinBagAllocation:"PrizePot_coinBagAllocation__88lJl",interactiveTitle:"PrizePot_interactiveTitle__wNDBC",instructions:"PrizePot_instructions__Xr5H5",question:"PrizePot_question__LV5BQ",prizePot:"PrizePot_prizePot__S0wyB",prizePotChange:"PrizePot_prizePotChange__pPsvI",answers:"PrizePot_answers__pdBvp",buttonWrapper:"PrizePot_buttonWrapper__obm-4",answerOption:"PrizePot_answerOption__StOUQ",dragOver:"PrizePot_dragOver__ZOyVc",moneyBag:"PrizePot_moneyBag__By8Lq",celebration:"PrizePot_celebration__c7jhq",scale:"PrizePot_scale__x-ay9",hide:"PrizePot_hide__3+RpL"};var o=r(7036),s=r(8262);const a="undefined"!==typeof window?n.useLayoutEffect:n.useEffect;function c(e,t,r){const[i,o]=function(e,t,r){const[i,o]=(0,n.useState)((()=>t(e))),c=(0,n.useCallback)((()=>{const n=t(e);s(i,n)||(o(n),r&&r())}),[i,e,r]);return a(c),[i,c]}(e,t,r);return a((function(){const t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(o,{handlerIds:[t]})}),[e,o]),i}function d(e,t,r){return c(t,e||(()=>({})),(()=>r.reconnect()))}function l(e,t){const r=[...t||[]];return null==t&&"function"!==typeof e&&r.push(e),(0,n.useMemo)((()=>"function"===typeof e?e():e),r)}function u(e){return(0,n.useMemo)((()=>e.hooks.dragSource()),[e])}function g(e){return(0,n.useMemo)((()=>e.hooks.dragPreview()),[e])}function h(e,t,r,n){let i=r?r.call(n,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;const o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;const a=Object.prototype.hasOwnProperty.bind(t);for(let c=0;c<o.length;c++){const s=o[c];if(!a(s))return!1;const d=e[s],l=t[s];if(i=r?r.call(n,d,l,s):void 0,!1===i||void 0===i&&d!==l)return!1}return!0}function p(e){return null!==e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function f(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(0,n.isValidElement)(t)){const n=t;return e(n,r),n}const i=t;!function(e){if("string"===typeof e.type)return;const t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}(i);return function(e,t){const r=e.ref;return(0,o.k)("string"!==typeof r,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?(0,n.cloneElement)(e,{ref:e=>{m(r,e),m(t,e)}}):(0,n.cloneElement)(e,{ref:t})}(i,r?t=>e(t,r):e)}}function v(e){const t={};return Object.keys(e).forEach((r=>{const n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{const e=f(n);t[r]=()=>e}})),t}function m(e,t){"function"===typeof e?e(t):e.current=t}class D{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();r&&this.disconnectDragPreview(),this.handlerId&&(t?r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions)):this.lastConnectedDragPreview=t)}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!h(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!h(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=v({dragSource:(e,t)=>{this.clearDragSource(),this.dragSourceOptions=t||null,p(e)?this.dragSourceRef=e:this.dragSourceNode=e,this.reconnectDragSource()},dragPreview:(e,t)=>{this.clearDragPreview(),this.dragPreviewOptions=t||null,p(e)?this.dragPreviewRef=e:this.dragPreviewNode=e,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}var b=r(5662);function O(){const{dragDropManager:e}=(0,n.useContext)(b.L);return(0,o.k)(null!=e,"Expected drag drop context"),e}let P=!1,I=!1;class C{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){(0,o.k)(!P,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return P=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{P=!1}}isDragging(){if(!this.sourceId)return!1;(0,o.k)(!I,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return I=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{I=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}class S{beginDrag(){const e=this.spec,t=this.monitor;let r=null;return r="object"===typeof e.item?e.item:"function"===typeof e.item?e.item(t):{},null!==r&&void 0!==r?r:null}canDrag(){const e=this.spec,t=this.monitor;return"boolean"===typeof e.canDrag?e.canDrag:"function"!==typeof e.canDrag||e.canDrag(t)}isDragging(e,t){const r=this.spec,n=this.monitor,{isDragging:i}=r;return i?i(n):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,r=this.connector,{end:n}=e;n&&n(t.getItem(),t),r.reconnect()}constructor(e,t,r){this.spec=e,this.monitor=t,this.connector=r}}function w(e,t,r){const i=O(),s=function(e,t,r){const i=(0,n.useMemo)((()=>new S(e,t,r)),[t,r]);return(0,n.useEffect)((()=>{i.spec=e}),[e]),i}(e,t,r),c=function(e){return(0,n.useMemo)((()=>{const t=e.type;return(0,o.k)(null!=t,"spec.type must be defined"),t}),[e])}(e);a((function(){if(null!=c){const[e,n]=function(e,t,r){const n=r.getRegistry(),i=n.addSource(e,t);return[i,()=>n.removeSource(i)]}(c,s,i);return t.receiveHandlerId(e),r.receiveHandlerId(e),n}}),[i,t,r,s,c])}function y(e,t){const r=l(e,t);(0,o.k)(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const i=function(){const e=O();return(0,n.useMemo)((()=>new C(e)),[e])}(),s=function(e,t){const r=O(),i=(0,n.useMemo)((()=>new D(r.getBackend())),[r]);return a((()=>(i.dragSourceOptions=e||null,i.reconnect(),()=>i.disconnectDragSource())),[i,e]),a((()=>(i.dragPreviewOptions=t||null,i.reconnect(),()=>i.disconnectDragPreview())),[i,t]),i}(r.options,r.previewOptions);return w(r,i,s),[d(r.collect,i,s),u(s),g(s)]}function T(e){return(0,n.useMemo)((()=>e.hooks.dropTarget()),[e])}class x{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!h(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=v({dropTarget:(e,t)=>{this.clearDropTarget(),this.dropTargetOptions=t,p(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}let _=!1;class M{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;(0,o.k)(!_,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return _=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{_=!1}}isOver(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}class j{canDrop(){const e=this.spec,t=this.monitor;return!e.canDrop||e.canDrop(t.getItem(),t)}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function k(e,t,r){const i=O(),s=function(e,t){const r=(0,n.useMemo)((()=>new j(e,t)),[t]);return(0,n.useEffect)((()=>{r.spec=e}),[e]),r}(e,t),c=function(e){const{accept:t}=e;return(0,n.useMemo)((()=>((0,o.k)(null!=e.accept,"accept must be defined"),Array.isArray(t)?t:[t])),[t])}(e);a((function(){const[e,n]=function(e,t,r){const n=r.getRegistry(),i=n.addTarget(e,t);return[i,()=>n.removeTarget(i)]}(c,s,i);return t.receiveHandlerId(e),r.receiveHandlerId(e),n}),[i,t,s,r,c.map((e=>e.toString())).join("|")])}function R(e,t){const r=l(e,t),i=function(){const e=O();return(0,n.useMemo)((()=>new M(e)),[e])}(),o=function(e){const t=O(),r=(0,n.useMemo)((()=>new x(t.getBackend())),[t]);return a((()=>(r.dropTargetOptions=e||null,r.reconnect(),()=>r.disconnectDropTarget())),[e]),r}(r.options);return k(r,i,o),[d(r.collect,i,o),T(o)]}var z=r(184);const N="coinBag",H=e=>{let{id:t}=e;const[{isDragging:r},n]=y((()=>({type:N,item:{id:t},collect:e=>({isDragging:!!e.isDragging()})})));return(0,z.jsx)("div",{ref:n,style:{opacity:r?.5:1,fontSize:"3em",cursor:"move"},children:"\ud83d\udcb0"})},B=e=>{let{index:t,onDropCoinBag:r,children:n,allocations:o}=e;const[{isOver:s},a]=R((()=>({accept:N,drop:(e,n)=>r(t,e.id),collect:e=>({isOver:!!e.isOver()})})));return(0,z.jsxs)("div",{ref:a,style:{border:s?"2px solid green":"1px solid gray",borderRadius:"20px",padding:"10px",margin:"5px",textAlign:"center",fontSize:"1em"},children:[n,(0,z.jsx)("div",{className:i.coinBagAllocation,children:o.map(((e,r)=>e===t&&(0,z.jsx)(H,{id:r},r)))})]})},F=e=>{let{onReturnCoinBag:t,children:r,allocations:n}=e;const[{isOver:o},s]=R((()=>({accept:N,drop:(e,r)=>t(e.id),collect:e=>({isOver:!!e.isOver()})})));return(0,z.jsxs)("div",{ref:s,style:{border:o?"2px dashed green":"1px dashed grey",padding:"10px",borderRadius:"10px",textAlign:"center",minHeight:"100px"},children:[r,(0,z.jsx)("div",{className:i.prizeFund,children:n.map(((e,t)=>-1===e&&(0,z.jsx)(H,{id:t},t)))})]})};const A=function(e){let{text:t}=e;const[r,o]=(0,n.useState)([]),[s,a]=(0,n.useState)(0),[c,d]=(0,n.useState)(128),l=r[s],[u,g]=(0,n.useState)(!1),[h,p]=(0,n.useState)({bags:[-1,-1,-1,-1]});(0,n.useEffect)((()=>{const e=t.split("\n\n").map((e=>{const t=e.split("\n");return{question:t[0],answers:t.slice(1).map((e=>({text:e.replace("*",""),isCorrect:e.includes("*")})))}}));o(e)}),[t]);const f=(e,t)=>{p((r=>{const n={...r};return n.bags[t]=e,n}))};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("h1",{className:i.interactiveTitle,children:"Prize Pot Quiz"}),(0,z.jsx)("p",{className:i.instructions,children:"Drag at least some of your prize pot to the options, spreading it depending on how sure you are! Click an option to transfer all to this answer."}),(0,z.jsxs)("div",{className:i.prizePot,children:["Current Fund: $",c]}),u?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:i.celebration,children:c>0?(0,z.jsx)(z.Fragment,{children:(0,z.jsx)("span",{children:"\ud83c\udf89"})}):(0,z.jsx)(z.Fragment,{children:(0,z.jsx)("span",{children:"\ud83d\ude22"})})}),(0,z.jsx)("div",{className:i.buttonWrapper,children:(0,z.jsx)("button",{style:i.restartButton,onClick:()=>{d(128),a(0),p({bags:[-1,-1,-1,-1]}),g(!1)},children:"Try Again?"})})]}):l&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(F,{onReturnCoinBag:e=>{p((t=>{const r={...t};return r.bags[e]=-1,r}))},allocations:h.bags,children:(0,z.jsx)("div",{className:i.prizeFundTitle,children:"Prize Fund"})}),(0,z.jsx)("div",{className:i.buttonWrapper,children:(0,z.jsx)("button",{className:i.submitButton,disabled:h.bags.every((e=>-1===e)),onClick:()=>{const e=l.answers.findIndex((e=>e.isCorrect)),t=c/4,n=h.bags.filter((t=>t===e)).length*t*4,i=h.bags.filter((t=>t!==e&&-1!==t)).length*t,o=Math.ceil(c-i+n);d(o),s+1<r.length&&o>0?(a(s+1),p({bags:[-1,-1,-1,-1]})):g(!0)},children:"Submit Final Answer"})}),(0,z.jsx)("p",{className:i.question,children:l.question}),(0,z.jsx)("div",{className:i.gameArea,children:l&&(0,z.jsx)(z.Fragment,{children:(0,z.jsx)("div",{className:i.answers,children:l.answers.map(((e,t)=>(0,z.jsx)(B,{index:t,onDropCoinBag:f,allocations:h.bags,children:(0,z.jsx)("div",{className:"".concat(i.answerOption),onClick:()=>(e=>{p((t=>({...t,bags:t.bags.map((()=>e))})))})(t),children:e.text})},t)))})})})]})]})}},8262:e=>{e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!==i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!==i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!==i--;){var s=o[i];if(!e(t[s],r[s]))return!1}return!0}return t!==t&&r!==r}}}]);
//# sourceMappingURL=899.41adeb39.chunk.js.map