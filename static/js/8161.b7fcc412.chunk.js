"use strict";(self.webpackChunkclass_interactives=self.webpackChunkclass_interactives||[]).push([[8161],{8161:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var r=n(2791),l=n(3047),a=n.n(l);const i={gameArea:"RaffleBalls_gameArea__gWI+b",ball:"RaffleBalls_ball__canP3",expanded:"RaffleBalls_expanded__07lut",ballText:"RaffleBalls_ballText__7VkF1",selectButton:"RaffleBalls_selectButton__BQfd1",raffleContainer:"RaffleBalls_raffleContainer__paakC",gameAreaContainer:"RaffleBalls_gameAreaContainer__OaGgR",winnersPanel:"RaffleBalls_winnersPanel__Kvn+L",winnersList:"RaffleBalls_winnersList__qNcMA",winner:"RaffleBalls_winner__SG19b"};var s=n(184);const o=function(e){let{text:t}=e;const n=(0,r.useRef)(null),l=(0,r.useRef)(null),o=(0,r.useRef)([]),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)([]),[f,p]=(0,r.useState)(!0),[w,g]=(0,r.useState)(null),[m,S]=(0,r.useState)(null),[y,x]=(0,r.useState)(!1),[_,b]=(0,r.useState)(null),[B,v]=(0,r.useState)({}),[E,R]=(0,r.useState)(t.startsWith("OPTIONS:")?t.split("\n").slice(1).join("\n"):t),[j,W]=(0,r.useState)([]),[C,N]=(0,r.useState)(!1),[T,k]=(0,r.useState)(0);return(0,r.useEffect)((()=>{const e=t.split("\n")[0];if(e.startsWith("OPTIONS:")){e.split(":")[1].split(",").forEach((e=>{const[t,n]=e.split("=");"drop_all"===t&&"yes"===n?N(!0):"group_size"===t&&k(parseInt(n,10))}))}}),[t]),(0,r.useEffect)((()=>{const e=()=>{window.location.reload()};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,r.useEffect)((()=>{const e=a().Engine.create();e.gravity.y=0,e.gravity.x=0,l.current=e,o.current=[];const t=a().Render.create({element:n.current,engine:e,options:{width:n.current.offsetWidth,height:n.current.offsetHeight,wireframes:!1,background:"#f0f0f0"}}),r={width:n.current.offsetWidth,height:n.current.offsetHeight},i=[a().Bodies.rectangle(r.width/2,0,r.width,10,{isStatic:!0,render:{fillStyle:"red"}}),!C&&a().Bodies.rectangle(r.width/2,r.height,r.width,10,{isStatic:!0,render:{fillStyle:"red"}}),a().Bodies.rectangle(0,r.height/2,10,r.height,{isStatic:!0,render:{fillStyle:"red"}}),a().Bodies.rectangle(r.width,r.height/2,10,r.height,{isStatic:!0,render:{fillStyle:"red"}})],s=r.height-150,c=!C&&a().Bodies.rectangle(r.width/4,s,r.width/2,8,{isStatic:!0,render:{fillStyle:"blue"}});g(c);const d=!C&&a().Bodies.rectangle(3*r.width/4,s,r.width/2,8,{isStatic:!0,render:{fillStyle:"blue"}});S(d),a().World.add(e.world,[...i,c,d]);const u=((r.width/2-22.5)**2+12100)**.5,f=a().Bodies.rectangle(r.width/2-22.5-u/2,r.height-110*u/(r.width/2-22.5)/2-40,u,8,{isStatic:!0,angle:Math.atan(110/(r.width/2-22.5)),render:{fillStyle:"blue"}}),p=a().Bodies.rectangle(r.width/2+22.5+u/2,r.height-110*u/(r.width/2-22.5)/2-40,u,8,{isStatic:!0,angle:Math.PI-Math.atan(110/(r.width/2-22.5)),render:{fillStyle:"blue"}}),w=a().Bodies.rectangle(r.width/2-22.5-8,r.height-20,8,40,{isStatic:!0,render:{fillStyle:"blue"}}),m=a().Bodies.rectangle(r.width/2+22.5+8,r.height-20,8,40,{isStatic:!0,render:{fillStyle:"blue"}});a().World.add(e.world,[f,p,w,m]);const y=E.split("\n").map((e=>{const[t,n]=e.split(",");return{name:t,score:parseInt(n,10)?parseInt(n,10):1}})),x=[],_=B;y.forEach(((e,t)=>{if(!_[e.name]){const n=360*t/y.length;_[e.name]="hsl(".concat(n,", 100%, 50%)")}Array.from({length:e.score}).forEach(((t,n)=>{const l=20+Math.random()*(r.width-40),i=20+Math.random()*(r.height-190),s=_[e.name],c=a().Bodies.circle(l,i,20,{restitution:1,friction:0,frictionAir:0,frictionStatic:0,inertia:1/0,render:{fillStyle:s},label:e.name,customColor:s});o.current.push(c),x.push({x:l,y:i,color:s,label:e.name})}))})),h(x),v(_),a().Render.run(t);const b=a().Runner.create();return a().Runner.run(b,e),()=>{a().Render.stop(t),a().Runner.stop(b),a().World.clear(e.world),a().Engine.clear(e),t.canvas.remove(),t.canvas=null,t.context=null,t.textures={}}}),[E,B,C]),(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{onClick:()=>{if(C)return p(!1),d(null),o.current.forEach((e=>{a().World.add(l.current.world,e);const t=.1*(Math.random()-.5),n=.1*(Math.random()-.5);a().Body.applyForce(e,{x:e.position.x,y:e.position.y},{x:t,y:n})})),l.current.world.gravity.y=1,o.current.forEach((e=>{a().Body.set(e,{restitution:.5})})),void a().Events.on(l.current,"afterUpdate",(()=>{x(!0),o.current.forEach(((e,t)=>{e.position.y>n.current.offsetHeight&&(W((t=>[...t,e.label])),a().World.remove(l.current.world,e),o.current.splice(t,1))})),0===o.current.length&&a().Events.off(l.current,"afterUpdate")}));p(!1),o.current.forEach((e=>{a().World.add(l.current.world,e);const t=.1*(Math.random()-.5),n=.1*(Math.random()-.5);a().Body.applyForce(e,{x:e.position.x,y:e.position.y},{x:t,y:n})})),setTimeout((()=>{l.current.world.gravity.y=1,o.current.forEach((e=>{a().Body.set(e,{restitution:.5})})),setTimeout((()=>{a().World.remove(l.current.world,[w,m]),setTimeout((()=>{let e=o.current[0],t=0;o.current.forEach(((n,r)=>{n.position.y>e.position.y&&(e=n,t=r)}));const n=o.current.map((e=>({color:e.customColor,label:e.label,x:e.position.x,y:e.position.y,visible:!0})));h(n),d(t),a().World.remove(l.current.world,o.current),b(t),p(!0),x(!0),W((t=>[...t,e.label]))}),4e3)}),3e3)}),3e3)},className:i.selectButton,children:"SELECT"}),y&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>{window.location.reload()},children:"RESET"}),!C&&(0,s.jsx)("button",{onClick:()=>{const e=u[_].label,t=E.split("\n").map((t=>{const[n,r]=t.split(",");if(n===e){const e=parseInt(r,10)-1;return"".concat(n,",").concat(e)}return t})).filter((e=>!e.includes(",0"))).join("\n");x(!1),d(null),R(t)},children:"RESET WITHOUT WINNING BALL"}),!C&&(0,s.jsx)("button",{onClick:()=>{const e=u[_].label,t=E.split("\n").filter((t=>!t.startsWith(e))).join("\n");x(!1),d(null),R(t)},children:"RESET WITHOUT WINNER"})]}),(0,s.jsx)("div",{ref:n,className:i.gameArea,children:f&&u.map(((e,t)=>(0,s.jsx)("div",{id:"ball-".concat(t),className:"".concat(i.ball," ").concat(c===t?i.expanded:""),onClick:()=>(e=>{d(e)})(t),style:{backgroundColor:e.color,top:"".concat(e.y-20,"px"),left:"".concat(e.x-20,"px")},children:c===t?(0,s.jsx)("span",{className:i.ballText,children:e.label}):null},t)))}),y&&(0,s.jsxs)("div",{className:i.winnersPanel,children:[(0,s.jsx)("h3",{children:"Results"}),(0,s.jsx)("div",{className:i.winnersList,children:j.map(((e,t)=>(0,s.jsxs)(r.Fragment,{children:[(0,s.jsxs)("div",{className:i.winner,children:[t+1,". ",e]}),T>1&&(t+1)%T===0&&(0,s.jsx)("hr",{className:i.separator})]},t)))})]})]})}}}]);
//# sourceMappingURL=8161.b7fcc412.chunk.js.map