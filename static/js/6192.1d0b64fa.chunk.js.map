{"version":3,"file":"static/js/6192.1d0b64fa.chunk.js","mappings":"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","sources":["webpack://class-interactives/./src/components/RandomWheel.module.css?cdf8","components/RandomWheel.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"GameArea\":\"RandomWheel_GameArea__XVg-R\",\"GameWheel\":\"RandomWheel_GameWheel__TtFlD\",\"ItemsList\":\"RandomWheel_ItemsList__PdLUC\",\"Item\":\"RandomWheel_Item__EZbNZ\",\"celebration\":\"RandomWheel_celebration__-Ctq-\",\"flyAcross\":\"RandomWheel_flyAcross__qlO7a\"};","import React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport styles from \"./RandomWheel.module.css\";\n\nfunction RandomWheel({ text }) {\n  const [items, setItems] = useState([]);\n  const [rotationAngle, setRotationAngle] = useState(0);\n  const [spinCompleted, setSpinCompleted] = useState(false);\n  const [spinTime, setSpinTime] = useState(12); // Default spin time of 12 seconds\n\n  const canvasRef = useRef(null);\n  const gameWheelRef = useRef(null);\n  const animationRef = useRef(null);\n\n  const unifiedEasing = (t) => {\n    return 0.5 * (1 - Math.cos(Math.PI * t));\n  };\n\n  const shuffleItems = (itemList) => {\n    const shuffledItems = [...itemList];\n    for (let i = shuffledItems.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [shuffledItems[i], shuffledItems[j]] = [\n        shuffledItems[j],\n        shuffledItems[i],\n      ];\n    }\n\n    return shuffledItems;\n  };\n\n  const spinWheel = () => {\n    let startTime = null;\n    let duration = spinTime * 1000; // Convert seconds to milliseconds\n    let speedAdjuster = 0.6 + Math.random() * 0.4;\n\n    const spin = (timestamp) => {\n      if (!startTime) {\n        startTime = timestamp;\n      }\n\n      let elapsed = timestamp - startTime;\n      let speed;\n\n      if (elapsed < duration / 2) {\n        speed = unifiedEasing(elapsed / duration);\n      } else if (elapsed < duration) {\n        speed = 1 - unifiedEasing(elapsed / duration);\n      } else {\n        cancelAnimationFrame(animationRef.current);\n        setSpinCompleted(true);\n        return;\n      }\n\n      setRotationAngle(\n        (prevAngle) => (prevAngle + speed * speedAdjuster) % (2 * Math.PI)\n      );\n      animationRef.current = requestAnimationFrame(spin);\n    };\n\n    animationRef.current = requestAnimationFrame(spin);\n  };\n\n  useEffect(() => {\n    const lines = text.split(\"\\n\");\n    let options = lines[0].startsWith(\"OPTIONS:\") ? lines.shift() : \"\";\n    let spinTimeLocal = 12; // Default spin time\n\n    const expandItems = (line) => {\n      const [item, count] = line.split(\":\");\n      const trimmedItem = item.trim();\n      // Apply the max length check to each item\n      const truncatedItem =\n        trimmedItem.length > 20\n          ? trimmedItem.substring(0, 20) + \"...\"\n          : trimmedItem;\n      return isNaN(count) ? [line] : Array(parseInt(count)).fill(truncatedItem);\n    };\n\n    // Parse the OPTIONS line for spin time\n    if (options) {\n      const optionsParts = options.split(\":\");\n      if (optionsParts[1]) {\n        const settings = optionsParts[1].split(\",\");\n        settings.forEach((setting) => {\n          const [key, value] = setting.split(\"=\");\n          if (key === \"time\" && !isNaN(value)) {\n            spinTimeLocal = parseFloat(value);\n          }\n        });\n      }\n    }\n\n    setSpinTime(spinTimeLocal);\n\n    const parsedItems = lines.flatMap((line) => {\n      // Handle the expansion and truncation in expandItems function\n      if (line.includes(\":\") && !isNaN(line.split(\":\")[1])) {\n        return expandItems(line);\n      } else {\n        const trimmedLine = line.trim();\n        return [\n          trimmedLine.length > 20\n            ? trimmedLine.substring(0, 20) + \"...\"\n            : trimmedLine,\n        ];\n      }\n    });\n\n    setItems(shuffleItems(parsedItems));\n  }, [text]);\n\n  const drawWheel = useCallback(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const rect = gameWheelRef.current.getBoundingClientRect();\n    canvas.width = rect.width;\n    canvas.height = rect.height;\n\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    const centerX = canvas.width / 2;\n    // Adjust centerY to move the wheel down slightly, making space for the marker\n    const centerY = canvas.height / 2 + 10; // Adjusted to add space for the marker at the top\n    // Reduce the radius slightly to ensure the wheel is smaller and there is space for the marker\n    const radius = Math.min(centerX, centerY) - 30; // Reduced radius to make space for marker\n\n    ctx.save();\n    ctx.translate(centerX, centerY);\n    ctx.rotate(rotationAngle);\n\n    ctx.beginPath();\n    ctx.arc(0, 0, radius, 0, 2 * Math.PI);\n    ctx.stroke();\n    ctx.fillStyle = \"lightpink\";\n    ctx.fill();\n    ctx.fillStyle = \"black\";\n    ctx.font = \"1.3em Arial\";\n\n    const numItems = items.length;\n    const angleStep = (2 * Math.PI) / numItems;\n\n    const offsetAngle = angleStep / 2;\n    for (let i = 0; i < numItems; i++) {\n      const angle = i * angleStep + offsetAngle;\n      ctx.beginPath();\n      ctx.moveTo(0, 0);\n      ctx.lineTo(radius * Math.cos(angle), radius * Math.sin(angle));\n      ctx.stroke();\n    }\n\n    ctx.textAlign = \"right\";\n    ctx.textBaseline = \"middle\";\n    for (let i = 0; i < numItems; i++) {\n      const angle = i * angleStep;\n      ctx.save();\n      ctx.rotate(angle);\n      ctx.fillText(items[i], radius - 10, 0); // Adjust if needed to fit the text\n      ctx.restore();\n    }\n\n    ctx.restore();\n\n    // Draw the marker at the top center of the canvas, outside of the rotating context\n    ctx.fillStyle = \"black\";\n    ctx.beginPath();\n    ctx.moveTo(centerX - 10, 10); // Start point of triangle\n    ctx.lineTo(centerX + 10, 10); // Right side of triangle\n    ctx.lineTo(centerX, 25); // Tip of triangle pointing down\n    ctx.closePath();\n    ctx.fill();\n  }, [items, rotationAngle]);\n\n  useEffect(() => {\n    const handleResize = () => {\n      drawWheel(); // Redraw when window resizes\n    };\n\n    window.addEventListener(\"resize\", handleResize);\n    drawWheel(); // Initial draw\n\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, [items, rotationAngle, drawWheel]); // Ensuring drawWheel reacts to state changes\n\n  const handleItemClick = (item) => {\n    // Remove the first instance of the item\n    setItems((currentItems) => {\n      const index = currentItems.indexOf(item);\n      if (index > -1) {\n        return [\n          ...currentItems.slice(0, index),\n          ...currentItems.slice(index + 1),\n        ];\n      }\n      return currentItems;\n    });\n  };\n\n  const handleItemRightClick = (event, item) => {\n    event.preventDefault(); // Prevent the default context menu\n    // Remove all instances of the item\n    setItems((currentItems) =>\n      currentItems.filter((currentItem) => currentItem !== item)\n    );\n  };\n\n  // Create a list of unique items for display\n  const uniqueItems = Array.from(new Set(items));\n\n  return (\n    <>\n      <div className={styles.GameArea}>\n        <div className={styles.GameWheel} ref={gameWheelRef}>\n          <button\n            onClick={() => {\n              setSpinCompleted(false);\n              spinWheel();\n            }}\n            style={{ display: \"block\", margin: \"0 auto\" }}\n          >\n            Spin Wheel\n          </button>\n          <canvas ref={canvasRef}></canvas>\n        </div>\n        <div className={styles.ItemsList}>\n          {uniqueItems.map((item, index) => (\n            <div\n              key={index}\n              className={styles.Item}\n              onClick={() => handleItemClick(item)}\n              onContextMenu={(event) => handleItemRightClick(event, item)}\n            >\n              {item}\n            </div>\n          ))}\n        </div>\n      </div>\n      {spinCompleted && <div className={styles.celebration}>🎉</div>}\n    </>\n  );\n}\n\nexport default RandomWheel;\n"],"names":["_ref","text","items","setItems","useState","rotationAngle","setRotationAngle","spinCompleted","setSpinCompleted","spinTime","setSpinTime","canvasRef","useRef","gameWheelRef","animationRef","unifiedEasing","t","Math","cos","PI","useEffect","lines","split","options","startsWith","shift","spinTimeLocal","optionsParts","forEach","setting","key","value","isNaN","parseFloat","parsedItems","flatMap","line","includes","item","count","trimmedItem","trim","truncatedItem","length","substring","Array","parseInt","fill","expandItems","trimmedLine","itemList","shuffledItems","i","j","floor","random","shuffleItems","drawWheel","useCallback","canvas","current","ctx","getContext","rect","getBoundingClientRect","width","height","clearRect","centerX","centerY","radius","min","save","translate","rotate","beginPath","arc","stroke","fillStyle","font","numItems","angleStep","offsetAngle","angle","moveTo","lineTo","sin","textAlign","textBaseline","fillText","restore","closePath","handleResize","window","addEventListener","removeEventListener","uniqueItems","from","Set","_jsxs","_Fragment","children","className","styles","ref","_jsx","onClick","spinWheel","startTime","duration","speedAdjuster","spin","timestamp","speed","elapsed","cancelAnimationFrame","prevAngle","requestAnimationFrame","style","display","margin","map","index","currentItems","indexOf","slice","handleItemClick","onContextMenu","event","handleItemRightClick","preventDefault","filter","currentItem"],"sourceRoot":""}