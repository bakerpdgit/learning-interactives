"use strict";(self.webpackChunkclass_interactives=self.webpackChunkclass_interactives||[]).push([[521],{4657:(e,t,n)=>{n.d(t,{Z:()=>c});var s=n(8832),r=n(184);function l(e){const t=Math.random().toString(36).substring(2,10),n=e.split("$$"),l=[];return n.forEach(((e,n)=>{n%2===1?l.push((0,r.jsx)(s.InlineMath,{math:e},"MCIM-".concat(t,"-").concat(n))):l.push((0,r.jsx)("span",{children:e},"MCSP-".concat(t,"-").concat(n)))})),l}const c=function(e){let{text:t,renderNewLines:n=!1}=e;return n&&(t=(e=>e.replace(/\\n/g,"\n"))(t)),(0,r.jsx)("div",{style:{whiteSpace:t.includes("\n")&&n?"pre-wrap":"normal",marginTop:t.includes("$$")?"0.5em":"0"},children:l(t)})}},6521:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var s=n(2791),r=n(4657),l=n(184);const c=(0,s.forwardRef)(((e,t)=>{const{lb1:n,lb2:c,lb3:a,lb4:o,isSelected:i,onSelect:u,sqSize:d}=e,[h,b]=(0,s.useState)([n,c,a,o]);return(0,s.useImperativeHandle)(t,(()=>({getLabels:()=>h,setLabels:e=>b(e),rotateLabels:()=>{b((e=>[e[3],...e.slice(0,3)]))}}))),(0,l.jsxs)("div",{style:{width:"".concat(d,"px"),height:"".concat(d,"px")},className:"square ".concat(i?"selected":""),onClick:u,children:[(0,l.jsxs)("div",{className:"label top",children:[" ",(0,l.jsx)(r.Z,{text:h[0],renderNewLines:!0})]}),(0,l.jsxs)("div",{className:"label right",children:[" ",(0,l.jsx)(r.Z,{text:h[1],renderNewLines:!0})]}),(0,l.jsxs)("div",{className:"label bottom",children:[" ",(0,l.jsx)(r.Z,{text:h[2],renderNewLines:!0})]}),(0,l.jsxs)("div",{className:"label left",children:[" ",(0,l.jsx)(r.Z,{text:h[3],renderNewLines:!0})]}),(0,l.jsx)("button",{className:"rotate-button",style:{fontSize:"1.5em"},onClick:e=>{e.stopPropagation(),b((e=>[e[3],...e.slice(0,3)]))},children:"\ud83d\udd04"})]})}));function a(e,t,n){const s=Math.floor(e/n),r=e%n;let l,c=s,a=r;switch(t){case 0:c=s-1,l=2;break;case 1:a=r+1,l=3;break;case 2:c=s+1,l=0;break;case 3:a=r-1,l=1;break;default:return null}if(c>=0&&c<n&&a>=0&&a<n){return{squareIndex:c*n+a,labelIndex:l}}return null}const o=e=>{let{components:t,originalPairs:n,gridDimension:r,sqSize:o}=e;const[i,u]=(0,s.useState)(null),[d,h]=(0,s.useState)(null),b=(0,s.useRef)([]),[f,m]=(0,s.useState)(null),[x,p]=(0,s.useState)(1),[g,j]=(0,s.useState)(!1),S=()=>function(e,t,n){for(let s=0;s<e.length;s++){const r=e[s];for(let l=0;l<4;l++){const c=r.labels[l];if(""===c)continue;const o=a(s,l,n);if(null===o)return!1;const i=e[o.squareIndex].labels[o.labelIndex];if(""===i)return!1;const u="".concat(c,":").concat(i),d="".concat(i,":").concat(c);if(!t.includes(u)&&!t.includes(d))return!1}}return!0}(b.current.map((e=>({labels:e.getLabels()}))),n,r);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{style:{fontSize:"".concat(x,"em")},className:"grid-container ".concat(3===r?"three-by-three":"four-by-four"),children:t.map(((e,t)=>(0,l.jsx)("div",{className:"grid-item",children:(0,l.jsx)(c,{ref:e=>b.current[t]=e,...e,isSelected:i===t,onSelect:()=>(e=>{if(null!==d){const t=b.current[d].getLabels(),n=b.current[e].getLabels();b.current[d].setLabels(n),b.current[e].setLabels(t),h(null),u(null),S()}else h(e),u(e)})(t),checkPuzzle:S,sqSize:o})},t)))}),f&&(0,l.jsx)("div",{className:"message ".concat(g?"isCorrect":"isIncorrect"),children:f}),(0,l.jsxs)("span",{children:[(0,l.jsx)("button",{onClick:()=>{S()?(j(!0),m("Well Done!")):(j(!1),m("Not Yet!")),setTimeout((()=>m(null)),2e3)},children:"Check Solution"}),(0,l.jsx)("button",{onClick:()=>p((e=>e+.1)),children:"+"}),(0,l.jsx)("button",{onClick:()=>p((e=>Math.max(.4,e-.1))),children:"-"})]}),g&&(0,l.jsx)("div",{className:"celebration",children:"\ud83c\udf89"})]})},i=e=>{let{text:t}=e;const n=(0,s.useRef)(null),[r,c]=(0,s.useState)(250);let a=t.split("\n");const i=a.map((e=>e.replace("\n","")));function u(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}a=u(a.map((e=>{const[t,n]=e.split(":");return Math.random()>.5?"".concat(n,":").concat(t):e})));const d=a.length;let h;d<=12?h=3:d<=24?h=4:console.error("Too many question-answer pairs!");const b=Array.from({length:h},(()=>Array.from({length:h},(()=>({lb1:"",lb2:"",lb3:"",lb4:""})))));let f=0;const m=a.map((e=>{const[t,n]=e.split(":");return{question:t,answer:n}}));for(let s=0;s<h;s++){for(let e=0;e<h-1;e++)f<d&&(b[s][e].lb2=m[f].question,b[s][e+1].lb4=m[f].answer,f++);if(s<h-1)for(let e=0;e<h;e++)f<d&&(b[s][e].lb3=m[f].question,b[s+1][e].lb1=m[f].answer,f++)}const x=u(b.flat()).map((e=>{const t=["lb1","lb2","lb3","lb4"],n=Math.floor(4*Math.random());for(let s=0;s<n;s++){const n=e[t[3]];for(let s=3;s>0;s--)e[t[s]]=e[t[s-1]];e[t[0]]=n}return e}));return(0,s.useEffect)((()=>{const e=()=>{if(n.current){const e=n.current.clientHeight;c((e-70)/h)}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[h]),(0,l.jsx)("div",{className:"gameArea",ref:n,children:(0,l.jsx)(o,{components:x,originalPairs:i,gridDimension:h,sqSize:r})})};const u=function(e){let{text:t}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(i,{text:t})})}}}]);
//# sourceMappingURL=521.7a948d1a.chunk.js.map