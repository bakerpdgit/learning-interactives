{"version":3,"file":"static/js/6521.ac630570.chunk.js","mappings":"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","sources":["components/MathComponent.js","components/Tarsia.js"],"sourcesContent":["import { InlineMath } from \"react-katex\";\n\nfunction parseAndRenderMath(text) {\n  const prefix = Math.random().toString(36).substring(2, 10); // Generate an 8-character random string\n\n  // Split the text based on $$ delimiters\n  const segments = text.split(\"$$\");\n  const elements = [];\n\n  segments.forEach((segment, index) => {\n    if (index % 2 === 1) {\n      // Odd-indexed segments are LaTeX (since they are enclosed between $$ delimiters)\n      elements.push(\n        <InlineMath key={`MCIM-${prefix}-${index}`} math={segment} />\n      );\n    } else {\n      elements.push(<span key={`MCSP-${prefix}-${index}`}>{segment}</span>);\n    }\n  });\n\n  return elements;\n}\n\nconst renderWithNewLines = (text) => {\n  return text.replace(/\\\\n/g, \"\\n\");\n};\n\nfunction MathComponent({ text, renderNewLines = false }) {\n  if (renderNewLines) {\n    text = renderWithNewLines(text);\n  }\n\n  return (\n    <div\n      style={{\n        whiteSpace:\n          text.includes(\"\\n\") && renderNewLines ? \"pre-wrap\" : \"normal\",\n        marginTop: text.includes(\"$$\") ? \"0.5em\" : \"0\",\n      }}\n    >\n      {parseAndRenderMath(text)}\n    </div>\n  );\n}\n\nexport default MathComponent;\n","import React, {\n  useState,\n  useImperativeHandle,\n  forwardRef,\n  useRef,\n  useEffect,\n} from \"react\";\nimport \"./Tarsia.css\";\nimport MathComponent from \"./MathComponent.js\";\n\nconst SquareComponent = forwardRef((props, ref) => {\n  const { lb1, lb2, lb3, lb4, isSelected, onSelect, sqSize } = props;\n  // eslint-disable-next-line\n  const [labels, setLabels] = useState([lb1, lb2, lb3, lb4]);\n\n  useImperativeHandle(ref, () => ({\n    getLabels: () => labels,\n    setLabels: (newLabels) => setLabels(newLabels),\n    rotateLabels: () => {\n      setLabels((prevLabels) => [prevLabels[3], ...prevLabels.slice(0, 3)]);\n    },\n  }));\n\n  return (\n    <div\n      style={{ width: `${sqSize}px`, height: `${sqSize}px` }}\n      className={`square ${isSelected ? \"selected\" : \"\"}`}\n      onClick={onSelect}\n    >\n      <div className=\"label top\">\n        {\" \"}\n        <MathComponent text={labels[0]} renderNewLines={true} />\n      </div>\n      <div className=\"label right\">\n        {\" \"}\n        <MathComponent text={labels[1]} renderNewLines={true} />\n      </div>\n      <div className=\"label bottom\">\n        {\" \"}\n        <MathComponent text={labels[2]} renderNewLines={true} />\n      </div>\n      <div className=\"label left\">\n        {\" \"}\n        <MathComponent text={labels[3]} renderNewLines={true} />\n      </div>\n      <button\n        className=\"rotate-button\"\n        style={{ fontSize: \"1.5em\" }}\n        onClick={(event) => {\n          event.stopPropagation();\n          setLabels((prev) => [prev[3], ...prev.slice(0, 3)]);\n        }}\n      >\n        ðŸ”„\n      </button>\n    </div>\n  );\n});\n\nfunction findAdjacent(squareIndex, labelIndex, gridDimension) {\n  const row = Math.floor(squareIndex / gridDimension);\n  const col = squareIndex % gridDimension;\n\n  let adjacentRow = row;\n  let adjacentCol = col;\n  let adjacentLabelIndex;\n\n  switch (labelIndex) {\n    case 0: // Top\n      adjacentRow = row - 1;\n      adjacentLabelIndex = 2; // Bottom label of the square above\n      break;\n    case 1: // Right\n      adjacentCol = col + 1;\n      adjacentLabelIndex = 3; // Left label of the square on the right\n      break;\n    case 2: // Bottom\n      adjacentRow = row + 1;\n      adjacentLabelIndex = 0; // Top label of the square below\n      break;\n    case 3: // Left\n      adjacentCol = col - 1;\n      adjacentLabelIndex = 1; // Right label of the square on the left\n      break;\n    default:\n      return null;\n  }\n\n  if (\n    adjacentRow >= 0 &&\n    adjacentRow < gridDimension &&\n    adjacentCol >= 0 &&\n    adjacentCol < gridDimension\n  ) {\n    const adjacentSquareIndex = adjacentRow * gridDimension + adjacentCol;\n    return { squareIndex: adjacentSquareIndex, labelIndex: adjacentLabelIndex };\n  } else {\n    return null; // Indicates the label is facing outwards\n  }\n}\n\nfunction checkSolution(squares, originalPairs, gridDimension) {\n  for (let squareIndex = 0; squareIndex < squares.length; squareIndex++) {\n    const square = squares[squareIndex];\n\n    for (let labelIndex = 0; labelIndex < 4; labelIndex++) {\n      const label = square.labels[labelIndex];\n\n      // Skip empty labels\n      if (label === \"\") continue;\n\n      // Find the adjacent square and label index\n      const adjacent = findAdjacent(squareIndex, labelIndex, gridDimension);\n\n      // If there's no adjacent square (label is facing outwards), puzzle can't be correct\n      if (adjacent === null) return false;\n\n      // Get the label from the adjacent square\n      const adjacentLabel =\n        squares[adjacent.squareIndex].labels[adjacent.labelIndex];\n\n      // If the adjacent label is empty, puzzle can't be correct\n      if (adjacentLabel === \"\") return false;\n\n      // Check if the pair exists in the original pairs list\n      const pair = `${label}:${adjacentLabel}`;\n      const reversedPair = `${adjacentLabel}:${label}`;\n\n      if (\n        !originalPairs.includes(pair) &&\n        !originalPairs.includes(reversedPair)\n      ) {\n        return false;\n      }\n    }\n  }\n\n  // If we've made it through all the checks, the puzzle is correct\n  return true;\n}\n\nconst SquareGrid = ({ components, originalPairs, gridDimension, sqSize }) => {\n  const [selected, setSelected] = useState(null);\n  const [firstSelected, setFirstSelected] = useState(null); // First selected square for swapping\n  const squareRefs = useRef([]);\n  const [message, setMessage] = useState(null);\n  const [fontSize, setFontSize] = useState(1); // Default font size\n  const [isCorrect, setIsCorrect] = useState(false);\n\n  const increaseFontSize = () => setFontSize((prevSize) => prevSize + 0.1);\n  const decreaseFontSize = () =>\n    setFontSize((prevSize) => Math.max(0.4, prevSize - 0.1));\n\n  const handleCheckSolution = () => {\n    const result = checkPuzzle();\n    if (result) {\n      setIsCorrect(true);\n      setMessage(\"Well Done!\");\n    } else {\n      setIsCorrect(false);\n      setMessage(\"Not Yet!\");\n    }\n\n    // Clear the message after 2 seconds\n    setTimeout(() => setMessage(null), 2000);\n  };\n\n  const checkPuzzle = () => {\n    const allSquares = squareRefs.current.map((ref) => ({\n      labels: ref.getLabels(),\n    }));\n    return checkSolution(allSquares, originalPairs, gridDimension);\n  };\n\n  const handleSelect = (index) => {\n    if (firstSelected !== null) {\n      // Swap labels between firstSelected and currently selected square\n      const firstLabels = squareRefs.current[firstSelected].getLabels();\n      const secondLabels = squareRefs.current[index].getLabels();\n      squareRefs.current[firstSelected].setLabels(secondLabels);\n      squareRefs.current[index].setLabels(firstLabels);\n\n      // Reset firstSelected and selected\n      setFirstSelected(null);\n      setSelected(null);\n\n      checkPuzzle();\n    } else {\n      setFirstSelected(index);\n      setSelected(index);\n    }\n  };\n\n  return (\n    <>\n      <div\n        style={{ fontSize: `${fontSize}em` }}\n        className={`grid-container ${\n          gridDimension === 3 ? \"three-by-three\" : \"four-by-four\"\n        }`}\n      >\n        {components.map((props, index) => (\n          <div key={index} className=\"grid-item\">\n            <SquareComponent\n              ref={(el) => (squareRefs.current[index] = el)}\n              {...props}\n              isSelected={selected === index}\n              onSelect={() => handleSelect(index)}\n              checkPuzzle={checkPuzzle}\n              sqSize={sqSize}\n            />\n          </div>\n        ))}\n      </div>\n      {message && (\n        <div className={`message ${isCorrect ? \"isCorrect\" : \"isIncorrect\"}`}>\n          {message}\n        </div>\n      )}\n      <span>\n        <button onClick={handleCheckSolution}>Check Solution</button>\n        <button onClick={increaseFontSize}>+</button>\n        <button onClick={decreaseFontSize}>-</button>\n      </span>\n      {isCorrect && <div className=\"celebration\">ðŸŽ‰</div>}\n    </>\n  );\n};\n\nconst GameArea = ({ text }) => {\n  const gameAreaRef = useRef(null); // Step 2: Setup ref for the game area\n  const [sqSize, setSqSize] = useState(250); // Default size, will update dynamically\n\n  let lines = text.split(\"\\n\");\n  const originalPairs = lines.map((line) => line.replace(\"\\n\", \"\"));\n  // Shuffle and swap function\n  function shuffleArray(array) {\n    for (let i = array.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [array[i], array[j]] = [array[j], array[i]];\n    }\n    return array;\n  }\n\n  // Function to rotate labels in a grid object\n  const rotateLabels = (gridObj) => {\n    const keys = [\"lb1\", \"lb2\", \"lb3\", \"lb4\"];\n    const numRotations = Math.floor(Math.random() * 4); // Random number between 0 and 3\n\n    for (let i = 0; i < numRotations; i++) {\n      const temp = gridObj[keys[3]];\n      for (let j = 3; j > 0; j--) {\n        gridObj[keys[j]] = gridObj[keys[j - 1]];\n      }\n      gridObj[keys[0]] = temp;\n    }\n\n    return gridObj;\n  };\n\n  // Randomly swap questions and answers and shuffle the order\n  lines = shuffleArray(\n    lines.map((line) => {\n      const [q, a] = line.split(\":\");\n      return Math.random() > 0.5 ? `${a}:${q}` : line;\n    })\n  );\n\n  // BUILD PUZZLE: Step 1: Determine Grid Dimension\n  const pairsCount = lines.length;\n  let gridDimension;\n\n  if (pairsCount <= 12) {\n    gridDimension = 3;\n  } else if (pairsCount <= 24) {\n    gridDimension = 4;\n  } else {\n    console.error(\"Too many question-answer pairs!\");\n  }\n\n  // Step 2: Initialize 2D Grid\n  const grid = Array.from({ length: gridDimension }, () =>\n    Array.from({ length: gridDimension }, () => ({\n      lb1: \"\",\n      lb2: \"\",\n      lb3: \"\",\n      lb4: \"\",\n    }))\n  );\n\n  // Step 3: Populate Labels\n  let counter = 0;\n  const qaPairs = lines.map((line) => {\n    const [question, answer] = line.split(\":\");\n    return { question, answer };\n  });\n\n  for (let row = 0; row < gridDimension; row++) {\n    for (let col = 0; col < gridDimension - 1; col++) {\n      if (counter < pairsCount) {\n        grid[row][col].lb2 = qaPairs[counter].question;\n        grid[row][col + 1].lb4 = qaPairs[counter].answer;\n        counter++;\n      }\n    }\n    if (row < gridDimension - 1) {\n      for (let col = 0; col < gridDimension; col++) {\n        if (counter < pairsCount) {\n          grid[row][col].lb3 = qaPairs[counter].question;\n          grid[row + 1][col].lb1 = qaPairs[counter].answer;\n          counter++;\n        }\n      }\n    }\n  }\n\n  // Step 4: Flatten 2D Grid\n  const components = shuffleArray(grid.flat());\n\n  // Step 5: apply a random number of rotations to each:\n  const rotatedComponents = components.map(rotateLabels);\n\n  useEffect(() => {\n    const calculateSquareSize = () => {\n      if (gameAreaRef.current) {\n        const gameAreaHeight = gameAreaRef.current.clientHeight; // Get current height of the game area\n        const spaceForButtons = 70; // Adjust based on your actual space for buttons, in pixels\n        const gridSize = gridDimension; // This comes from your existing logic\n        const size = (gameAreaHeight - spaceForButtons) / gridSize;\n        setSqSize(size); // Update state with the calculated size\n      }\n    };\n\n    calculateSquareSize(); // Calculate initially\n\n    window.addEventListener(\"resize\", calculateSquareSize); // Recalculate on resize\n    return () => window.removeEventListener(\"resize\", calculateSquareSize); // Cleanup listener\n  }, [gridDimension]); // Effect dependencies\n\n  // Pass 'components' to SquareGrid\n\n  return (\n    <div className=\"gameArea\" ref={gameAreaRef}>\n      <SquareGrid\n        components={rotatedComponents}\n        originalPairs={originalPairs}\n        gridDimension={gridDimension}\n        sqSize={sqSize}\n      />\n    </div>\n  );\n};\n\nfunction Tarsia({ text }) {\n  return (\n    <>\n      <GameArea text={text} />\n    </>\n  );\n}\n\nexport default Tarsia;\n"],"names":["parseAndRenderMath","text","prefix","Math","random","toString","substring","segments","split","elements","forEach","segment","index","push","_jsx","InlineMath","math","concat","children","_ref","renderNewLines","replace","renderWithNewLines","style","whiteSpace","includes","marginTop","SquareComponent","forwardRef","props","ref","lb1","lb2","lb3","lb4","isSelected","onSelect","sqSize","labels","setLabels","useState","useImperativeHandle","getLabels","newLabels","rotateLabels","prevLabels","slice","_jsxs","width","height","className","onClick","MathComponent","fontSize","event","stopPropagation","prev","findAdjacent","squareIndex","labelIndex","gridDimension","row","floor","col","adjacentLabelIndex","adjacentRow","adjacentCol","SquareGrid","components","originalPairs","selected","setSelected","firstSelected","setFirstSelected","squareRefs","useRef","message","setMessage","setFontSize","isCorrect","setIsCorrect","checkPuzzle","squares","length","square","label","adjacent","adjacentLabel","pair","reversedPair","checkSolution","current","map","_Fragment","el","firstLabels","secondLabels","handleSelect","handleCheckSolution","setTimeout","increaseFontSize","prevSize","decreaseFontSize","max","GameArea","_ref2","gameAreaRef","setSqSize","lines","line","shuffleArray","array","i","j","q","a","pairsCount","console","error","grid","Array","from","counter","qaPairs","question","answer","rotatedComponents","flat","gridObj","keys","numRotations","temp","useEffect","calculateSquareSize","gameAreaHeight","clientHeight","window","addEventListener","removeEventListener","_ref3"],"sourceRoot":""}