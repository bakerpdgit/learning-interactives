"use strict";(self.webpackChunkmy_react_app=self.webpackChunkmy_react_app||[]).push([[262],{262:(e,l,t)=>{t.r(l),t.d(l,{default:()=>s});var a=t(2791),n=t(5851),i=t(6187),c=t(184);const s=function(e){let{text:l}=e;const[t,s]=(0,a.useState)([]),[r,o]=(0,a.useState)(!0),[p,u]=(0,a.useState)(null),{imageData:d,setImageData:m}=(0,i.c)(),g=(0,a.useRef)(null);(0,a.useEffect)((()=>{const e=setTimeout((()=>{o(!1)}),1e3);return()=>clearTimeout(e)}),[]);const b=e=>{m(e)};return(0,c.jsxs)("div",{className:"image-pin-maincontainer",children:[(0,c.jsxs)("div",{className:"image-pin-container",draggable:"false",onDragOver:e=>{e.preventDefault()},onDrop:e=>{if(!g.current||null===p)return;const l=g.current.getBoundingClientRect();let a=e.clientX-l.left,n=e.clientY-l.top;s(t.map(((e,l)=>l===p?{...e,labelX:a,labelY:n}:e))),u(null)},children:[("[local]"!==l||d)&&(0,c.jsx)("img",{ref:g,className:"image-pin-image",alt:"Highlight",onClick:e=>{if(!g.current)return;const l=g.current.getBoundingClientRect();let t=e.clientX-l.left,a=e.clientY-l.top;s((e=>[...e,{x:Math.max(0,Math.min(t,l.width-20)),y:Math.max(0,Math.min(a,l.height-20)),label:"",labelX:t,labelY:a-40}]))},draggable:"false",src:l&&"[local]"!==l?l:d,crossOrigin:"anonymous"}),"[local]"===l&&!d&&(0,c.jsxs)("div",{children:["The local image will need to be provided...",(0,c.jsx)("br",{})," ",(0,c.jsx)("input",{type:"file",className:"fileUpload",accept:"image/*",onChange:e=>(0,n.O)(e.target.files[0],b)})]}),t.map(((e,l)=>(0,c.jsxs)(a.Fragment,{children:[(0,c.jsx)("div",{className:"pin",style:{left:"".concat(e.x-10,"px"),top:"".concat(e.y-10,"px")},onContextMenu:e=>((e,l)=>{e.preventDefault(),s((e=>e.filter(((e,t)=>t!==l))))})(e,l),onDoubleClick:()=>(e=>{const l=prompt("Enter a label for this pin:",t[e].label);null!==l&&s(t.map(((t,a)=>a===e?{...t,label:l}:t)))})(l)},"pin-".concat(l)),e.label&&(0,c.jsx)("div",{className:"pin-label",style:{left:"".concat(e.labelX,"px"),top:"".concat(e.labelY,"px")},draggable:"true",onDragStart:e=>((e,l)=>{e.dataTransfer.setData("text/plain",""),u(l)})(e,l),children:e.label})]},"pinlabel-".concat(l))))]}),r&&(0,c.jsxs)("div",{className:"image-pin-instruction",children:[(0,c.jsx)("h1",{children:"Image Pins"}),(0,c.jsx)("p",{children:"click to drop pins, right-click to delete pin, double-click to add a label; drag labels to reposition."})]})]})}}}]);
//# sourceMappingURL=262.8ad64fbb.chunk.js.map