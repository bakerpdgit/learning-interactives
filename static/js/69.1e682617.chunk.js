"use strict";(self.webpackChunkmy_react_app=self.webpackChunkmy_react_app||[]).push([[69],{1069:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(2791),i=n(5851),l=n(6187);const r={imagePinMaincontainer:"ImagePins_imagePinMaincontainer__ve+Rp",imagePinContainer:"ImagePins_imagePinContainer__gV26t",imagePinImage:"ImagePins_imagePinImage__IpjTM",pinLabel:"ImagePins_pinLabel__boY-Q",imagePinInstruction:"ImagePins_imagePinInstruction__yX44S",pin:"ImagePins_pin__FcmAN"};var s=n(184);const c="[local]";const o=function(e){let{text:t}=e;const[n,o]=(0,a.useState)([]),[u,g]=(0,a.useState)(!0),[p,d]=(0,a.useState)({type:null,index:null,startX:0,startY:0}),[m,h]=(0,a.useState)(null),[f,b]=(0,a.useState)({width:0,height:0}),{textData:x,setTextData:y}=(0,l.c)(),_=(0,a.useRef)(null);(0,a.useEffect)((()=>{const e=t.split("\n"),n=e.pop();if(e.length>0){const t=e.map(((e,t)=>{const n=50+70*Math.floor(t/5),a=50+t%5*70;return{x:n,y:a,label:e,labelX:n,labelY:a-40}}));o(t)}h(n&&!n.includes(c)?n:x)}),[t,x]),(0,a.useEffect)((()=>{const e=setTimeout((()=>{_.current&&(b({width:_.current.offsetWidth,height:_.current.offsetHeight}),o((e=>e.map((e=>e.x>_.current.offsetWidth||e.y>_.current.offsetHeight?{...e,x:100,y:100,labelX:100,labelY:50}:e)))))}),1e3);return()=>clearTimeout(e)}),[m]),(0,a.useEffect)((()=>{const e=setTimeout((()=>{g(!1)}),1e3);return()=>clearTimeout(e)}),[]),(0,a.useEffect)((()=>{const e=()=>{if(!_.current||0===f.width||0===f.height)return;const e=_.current.offsetWidth/f.width,t=_.current.offsetHeight/f.height;let a=n.map((n=>({...n,x:n.x*e,y:n.y*t,labelX:n.labelX*e,labelY:n.labelY*t})));a=a.map((e=>e.x>_.current.offsetWidth||e.y>_.current.offsetHeight?{...e,x:100,y:100,labelX:100,labelY:50}:e)),o(a),_.current&&b({width:_.current.offsetWidth,height:_.current.offsetHeight})};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[f,n]);const P=(e,t,a)=>{e.dataTransfer.setData("text/plain","");const i=n[t],l="pin"===a?i.x:i.labelX,r="pin"===a?i.y:i.labelY;d({type:a,index:t,startX:l,startY:r})},v=e=>{y(e),h(e)};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:r.imagePinMaincontainer,children:[(0,s.jsxs)("div",{className:r.imagePinContainer,draggable:"false",onDragOver:e=>{e.preventDefault()},onDrop:e=>{if(!_.current||null===p.index)return;const t=_.current.getBoundingClientRect();let a=e.clientX-t.left,i=e.clientY-t.top;const l=a-p.startX,r=i-p.startY;o(n.map(((e,t)=>t===p.index?{...e,x:e.x+("pin"===p.type?l:0),y:e.y+("pin"===p.type?r:0),labelX:e.labelX+l,labelY:e.labelY+r}:e))),d({type:null,index:null,startX:0,startY:0})},children:[(!t.includes(c)||x)&&(0,s.jsx)("img",{ref:_,className:r.imagePinImage,alt:"Highlight",onClick:e=>{if(!_.current)return;const t=_.current.getBoundingClientRect();let n=e.clientX-t.left,a=e.clientY-t.top;o((e=>[...e,{x:Math.max(0,Math.min(n,t.width-20)),y:Math.max(0,Math.min(a,t.height-20)),label:"",labelX:n,labelY:a-40}]))},draggable:"false",src:m,crossOrigin:"anonymous"}),t.includes(c)&&!x&&(0,s.jsxs)("div",{children:["The local image will need to be provided...",(0,s.jsx)("br",{})," ",(0,s.jsx)("input",{type:"file",className:r.fileUpload,accept:"image/*",onChange:e=>(0,i.vh)(e.target.files[0],v)})]}),n.map(((e,t)=>(0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)("div",{className:r.pin,style:{left:"".concat(e.x-10,"px"),top:"".concat(e.y-10,"px")},draggable:"true",onDragStart:e=>P(e,t,"pin"),onContextMenu:e=>((e,t)=>{e.preventDefault(),o((e=>e.filter(((e,n)=>n!==t))))})(e,t),onDoubleClick:()=>(e=>{const t=prompt("Enter a label for this pin:",n[e].label);null!==t&&o(n.map(((n,a)=>a===e?{...n,label:t}:n)))})(t)},"pin-".concat(t)),e.label&&(0,s.jsx)("div",{className:r.pinLabel,style:{left:"".concat(e.labelX,"px"),top:"".concat(e.labelY-10,"px")},draggable:"true",onDragStart:e=>P(e,t,"label"),children:e.label})]},"pinlabel-".concat(t))))]}),u&&(0,s.jsxs)("div",{className:r.imagePinInstruction,children:[(0,s.jsx)("h1",{children:"Image Pins"}),(0,s.jsx)("p",{children:"click to drop pins, right-click to delete pin, double-click to add a label; drag labels to reposition."})]})]})})}}}]);
//# sourceMappingURL=69.1e682617.chunk.js.map