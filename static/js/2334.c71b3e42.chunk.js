"use strict";(self.webpackChunkclass_interactives=self.webpackChunkclass_interactives||[]).push([[2334],{2334:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var o=s(2791),n=s(6710),r=s.n(n);const a="AudioWordComplete_audioWordCompleteContainer__HYZRY",l="AudioWordComplete_audioPlayer__5VfU9",c="AudioWordComplete_sentence__U-0yV",i="AudioWordComplete_inputBox__2gpj3",u="AudioWordComplete_foundWord__TCqCY",d="AudioWordComplete_wrong__KtE0s",p="AudioWordComplete_nextQuestion__ciWpJ",h="AudioWordComplete_celebration__koUjh";var m=s(184);const f=function(e){let{text:t}=e;const[s,n]=(0,o.useState)([]),[f,_]=(0,o.useState)(0),[C,g]=(0,o.useState)(!1),[x,w]=(0,o.useState)(""),[j,v]=(0,o.useState)(null),[y,W]=(0,o.useState)([]),[k,L]=(0,o.useState)({}),[S,b]=(0,o.useState)(!1),[A,E]=(0,o.useState)(!1),T=(0,o.useRef)(null),N=(0,o.useRef)({});(0,o.useEffect)((()=>{(()=>{const e=t.trim().split(/\r?\n\s*\r?\n/).map(((e,t)=>{const s=e.split(/\r?\n/).map((e=>e.trim()));if(4!==s.length)return console.error("Block ".concat(t+1,": Expected 4 lines but got ").concat(s.length,".")),null;const[o,n,r,a]=s;return{url:o,startTime:parseFloat(n),endTime:parseFloat(r),sentence:a}})).filter((e=>null!==e));n(e)})()}),[t]),(0,o.useEffect)((()=>{if(s.length>0&&f<s.length){const e=s[f];v(e),w(e.sentence);const t=/\*([^\s]+)/g,o=[];let n;for(;null!==(n=t.exec(e.sentence));){let e=n[1];e=e.replace(/[.,?!]+$/,""),o.push(e)}W(o);const r={};o.forEach((e=>{r[e]=""})),L(r),b(!1),E(!0)}else f>=s.length&&s.length>0&&g(!0)}),[s,f]),(0,o.useEffect)((()=>{const e=y.every((e=>k[e].trim().toLowerCase()===e.toLowerCase()));if(b(e),!e){const e=y.find((e=>k[e].trim().toLowerCase()!==e.toLowerCase()));e&&N.current[e]&&N.current[e].focus()}}),[k,y]);const R=e=>{const t=e.target.dataset.word,s=e.target.value;L((e=>({...e,[t]:s})))},U=e=>{if("Enter"===e.key){const t=e.target.dataset.word,s=k[t];s.trim().toLowerCase()===t.toLowerCase()?L((e=>({...e,[t]:s}))):(e.target.classList.add(d),setTimeout((()=>{e.target.classList.remove(d)}),500))}};return C?(0,m.jsx)("div",{className:h,children:(0,m.jsx)("span",{role:"img","aria-label":"celebrate",children:"\ud83c\udf89"})}):j?(0,m.jsxs)("div",{className:a,children:[(0,m.jsx)("div",{className:l,children:(0,m.jsx)("button",{onClick:()=>{T.current&&(T.current.seekTo(j.startTime,"seconds"),E(!0))},children:"Repeat Audio"})}),(0,m.jsx)(r(),{ref:T,url:j.url,playing:A,controls:!1,width:"0",height:"0",onProgress:e=>{e.playedSeconds>=j.endTime&&E(!1)},onEnded:()=>E(!1),config:{youtube:{playerVars:{autoplay:1,controls:0,start:j.startTime,end:j.endTime}}}}),(0,m.jsx)("div",{className:c,children:(()=>{N.current={};const e=[];let t=x;t=t.replace(/\*/g,"");return t.split(/(\s+)/).forEach(((t,s)=>{const o=t.trim().match(/^([^\s.,?!]+)([.,?!]*)$/);if(o){const[n,r,a]=o;if(y.includes(r)){const t=k[r]||"";t.trim().toLowerCase()===r.toLowerCase()?e.push((0,m.jsx)("span",{className:u,style:{minWidth:"".concat(r.length,"ch")},children:r},s)):e.push((0,m.jsx)("input",{ref:e=>{e&&(N.current[r]=e)},type:"text","data-word":r,value:t,onChange:R,onKeyDown:U,style:{width:"".concat(r.length,"ch")},className:i},s)),e.push(a)}else e.push(t)}else e.push(t)})),e})()}),S&&(0,m.jsx)("div",{className:p,children:(0,m.jsx)("button",{onClick:()=>{_((e=>e+1))},children:"Next Question"})})]}):null}}}]);
//# sourceMappingURL=2334.c71b3e42.chunk.js.map