"use strict";(self.webpackChunkclass_interactives=self.webpackChunkclass_interactives||[]).push([[852],{852:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var r=a(2791);const c={timer:"TimeRecorder_timer__jRen-",button:"TimeRecorder_button__VUenm",controls:"TimeRecorder_controls__bXxMP",categories:"TimeRecorder_categories__+EFZM",category:"TimeRecorder_category__j75GT",categoryButton:"TimeRecorder_categoryButton__raval",selected:"TimeRecorder_selected__GkDOi",categoryTime:"TimeRecorder_categoryTime__w2jeo",addCategory:"TimeRecorder_addCategory__4Osf4",addCategoryButton:"TimeRecorder_addCategoryButton__vplZr",exportButton:"TimeRecorder_exportButton__GkIY1",GameArea:"TimeRecorder_GameArea__VQqrg"};var s=a(184);const o=e=>{let{time:t}=e;const a=Math.floor(t/60),r=t%60;return(0,s.jsxs)("div",{className:c.timer,children:[a,":",r<10?"0".concat(r):r]})},n=e=>{let{onClick:t,label:a,disabled:r}=e;return(0,s.jsx)("button",{onClick:t,className:c.button,disabled:r,children:a})},i=e=>{let{name:t,time:a,isSelected:r,onClick:o}=e;const n=Math.floor(a/60),i=a%60;return(0,s.jsxs)("div",{className:c.category,children:[(0,s.jsx)("div",{className:"".concat(c.categoryButton," ").concat(r?c.selected:""),onClick:()=>o(t),children:t}),(0,s.jsxs)("div",{className:c.categoryTime,children:[n,":",i<10?"0".concat(i):i]})]})},l=e=>{let{initialTime:t=0,categories:a=[]}=e;const[l,d]=(0,r.useState)(t),[m,u]=(0,r.useState)(!1),[_,x]=(0,r.useState)(!1),[g,T]=(0,r.useState)(null),[h,j]=(0,r.useState)(0),[v,b]=(0,r.useState)(null),[y,R]=(0,r.useState)(!1),p=(0,r.useRef)(null),[C,k]=(0,r.useState)("OTHER"),[S,f]=(0,r.useState)(a),[N,E]=(0,r.useState)(a.reduce(((e,t)=>(e[t]=0,e)),{OTHER:0})),[O,w]=(0,r.useState)(!1);(0,r.useEffect)((()=>{let e;return m&&!_&&(e=setInterval((()=>{const a=(new Date).getTime(),r=Math.floor((a-v)/1e3),c=Math.floor((a-g-h)/1e3),s=t>0?Math.max(t-c,0):c;d(s),E((e=>{const t={...e};return t[C]+=r,t})),b(a),0===s&&t>0&&(clearInterval(e),u(!1),x(!1),w(!0),R(!0))}),1e3)),()=>clearInterval(e)}),[m,_,g,h,t,v,C]);const A=e=>{k(e)};return(0,s.jsxs)("div",{className:c.timeRecorder,children:[(0,s.jsx)(o,{time:l}),(0,s.jsxs)("div",{className:c.controls,children:[(0,s.jsx)(n,{onClick:()=>{const e=(new Date).getTime();b(e),m?_?(x(!1),j(h+(e-v))):(x(!0),j(h+(e-v))):(u(!0),x(!1),T(e))},label:_||!m?"START":"PAUSE",disabled:O}),(0,s.jsx)(n,{onClick:()=>{u(!1),x(!1),w(!0),R(!0)},label:"END",disabled:O})]}),(0,s.jsx)("div",{className:c.categories,children:["OTHER",...S].map((e=>(0,s.jsx)(i,{name:e,time:N[e],isSelected:C===e,onClick:A},e)))}),(0,s.jsxs)("div",{className:c.addCategory,children:[(0,s.jsx)("input",{type:"text",ref:p,placeholder:"New category"}),(0,s.jsx)(n,{onClick:()=>{const e=p.current.value;e&&!N.hasOwnProperty(e)&&(E((t=>({...t,[e]:0}))),f((t=>[...t,e]))),p.current.value=""},label:"Add Category"})]}),(0,s.jsx)("div",{className:c.export,children:(0,s.jsx)(n,{onClick:()=>{const e="data:text/csv;charset=utf-8,"+["Category,Time (seconds)",...Object.entries(N).map((e=>{let[t,a]=e;return"".concat(t,",").concat(a)}))].join("\n"),t=encodeURI(e),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download","category_times.csv"),document.body.appendChild(a),a.click()},label:"Export",disabled:!y})})]})};const d=function(e){let{text:t}=e;const a=t.split("\n"),r=a[0].startsWith("OPTIONS:time=")?parseInt(a[0].split("=")[1],10):0,o=a.slice(r?1:0);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:c.GameArea,children:(0,s.jsx)(l,{initialTime:r,categories:o})})})}}}]);
//# sourceMappingURL=852.22e2d47d.chunk.js.map